{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="{% static 'FDjango/styles.css' %}">
</head>
<body>
    <div class="text-center center-div">
        <h1>Slet ikke stj√¶let design</h1>
        <p>Select devices and color</p>

        <form id="colorForm">
            <input type="color" id="selcolor" value="#ff0000" /> <br><br>
            <input type="range" id="selbrightness" value="100" min="0" max="100" /><br>
            <button type="button" class="button" onclick="submitForm()">
                <span class="text">Change devices colors submit</span>
            </button>
        </form>

        <button type="button" class="button" onclick="turnOffLight()">
            <span class="text">Turn of all light</span>
        </button>


    </div>


    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script>
        list_of_lights = ["0xd87a3bfffe0f2231", "0x5cc7c1fffe355388"]

        function submitForm() {
            var color = document.getElementById('selcolor').value;
            var brightness = document.getElementById('selbrightness').value * 2.5;
            changeColor(color, brightness);
        }

        function changeColor(color, brightness) {
            color = encodeURIComponent(color); // Encode the color parameter
            $.ajax({
                url: '{% url "alter_light" %}?color=' + color + '&brightness=' + brightness,
                type: 'GET',
                dataType: 'json',
                success: function(data) {
                    alert(data.result); // Handle the result as needed
                },
                error: function(error) {
                    console.error('Error calling Python function:', error);
                }
            });
        }

        function turnOffLight() {
            $.ajax({
                url: '{% url "turn_off_light" %}?state=' + "OFF",
                type: 'GET',
                dataType: 'json',
                success: function(data) {
                    alert(data.result); // Handle the result as needed
                },
                error: function(error) {
                    console.error('Error calling Python function:', error);
                }
            });
        }


    </script>
</body>
</html>
